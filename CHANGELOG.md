# Change Log

All notable changes to the "work-env" extension will be documented in this file.

Check [Keep a Changelog](http://keepachangelog.com/) for recommendations on how to structure this file.

## [1.1.9] - 2024-07-30

### Added
- キャッシュ機能用のテンプレートファイルを追加 (`resources/templates/cache_template/`)
- コンテナプロジェクト用のテンプレートファイルを追加 (`resources/templates/container_template/projects_template/`)
- キャッシュおよびコンテナ機能に関連するユニットテストを追加

### Changed
- Docker-installerモジュールの改善と関連テストの強化
- `.devcontainer_template/docker-compose.yml.template`を更新し、環境変数ファイル参照を改善
- 不要なファイルを削除 (`tatus`ファイルと旧VSIXパッケージ)

### Fixed
- テスト関連ファイルのバグ修正と改善

## [1.1.8] - 2025-04-25

### Improved

- READMEの内容を改善し、ユーザーガイドを更新
- ドキュメントの明確化と使いやすさの向上

## [1.1.7] - 2025-04-22

### Changed

- `resources/templates/container_template/sample_project/`ディレクトリを削除
- プロジェクト構造の整理と最適化
- 仕様書（specification.md）を更新して最新の構造を反映

## [1.1.6] - 2025-04-20

### Changed

- バージョンを1.1.6に更新
- VSIXパッケージを再ビルド

## [1.1.5] - 2025-04-15

### Changed

- **環境変数ファイル(.env)の配置場所を変更**
  - GitHub PATなどの環境変数を格納する.envファイルをcontainerディレクトリの外部（親ディレクトリ）に配置するように変更
  - 複数のコンテナ環境で環境変数を共有しやすくなるよう改善
  - docker-compose.ymlの設定を変更し、外部の.envファイルを参照するように修正

### Improved

- 環境変数管理の柔軟性向上
  - 共通設定を複数環境で再利用可能に
  - テンプレート処理機能の強化

## [1.1.4] - 2025-04-10

### Changed

- **Remote Containersのインストール確認機能を削除**
  - 依存関係を簡素化するためRemote Containers拡張機能の確認機能を削除
  - 事前チェック（preflightChecks）をDockerインストール確認のみに変更
  - 関連する設定項目とテストコードも削除

### Improved

- ドキュメントの更新
  - 仕様書からRemote Containers関連の記述を削除
  - READMEから依存関係の要件を更新
  - 事前チェックフローの明確化

## [1.1.3] - 2025-04-08

### Added

- LICENSEファイルの追加（MIT License）
- エラーメッセージの明確化
  - すべてのメッセージに `[work-env]` プレフィックスを追加
  - 発信元を識別しやすくするためのメッセージ改善

### Improved

- 拡張機能の動作改善
  - Remote Containers拡張機能の確認方法を改善
  - エラーハンドリングの強化
  - ユーザーエクスペリエンスの向上

### Fixed

- 拡張機能のコンパイルとパッケージングに関する問題を修正
  - VSIX作成時の警告対応
  - 適切なライセンス情報の提供

## [1.1.2] - 2025-04-06

### Added

- テスト結果保存機能の実装
  - `npm run test:save-results`コマンドによるテスト結果の自動保存
  - バージョン管理されたテスト結果のドキュメント化
  - テスト実行結果の詳細レポート生成機能

### Improved

- テスト管理の強化
  - テスト実行時の注意点をドキュメントに追加
  - テスト環境のクリーンアップ改善
  - 各種テスト（ユニット、ワークフロー、E2E）の安全な実行方法を整備

### Changed

- バージョン管理プロセスの改善
  - `npm version`コマンド実行前の自動テスト実行
  - テスト結果の自動保存とドキュメント更新
  - バージョンアップ手順のドキュメント化

## [1.1.1] - 2025-04-06

### Added

- テンプレート処理機能の強化
  - `template-processor.ts`モジュールの追加
  - プロジェクトテンプレート処理のユニットテスト実装

### Fixed

- リポジトリURLの更新
  - package.jsonのリポジトリ参照先を修正

### Improved

- プロジェクト構造の最適化
  - テンプレートファイルの配置を改善
  - コンテナ設定テンプレートの整理

## [1.1.0] - 2025-04-06

### Improved

- ユーザードキュメントの大幅な改善
  - README.mdの完全な改訂と整理
  - ユーザー向け情報の明確化と使いやすさの向上
  - ディレクトリ構造の説明をユーザー視点で更新

## [1.0.11] - 2025-04-05

### Improved

- ドキュメントの整理と更新
  - テスト関連ドキュメントの統合と明確化
  - 仕様書の最新状態への更新
  - 不要なドキュメントの削除

### Fixed

- パッケージバージョンの整合性確保
  - package.jsonのバージョン番号を更新

## [1.0.10] - 2025-04-05

### Fixed

- テスト実行時の再帰呼び出し問題を解決
  - テストヘルパーモジュールの条件分岐改善
  - モックリセット処理の最適化
  - 無限再帰を防止するセーフガード追加

### Changed

- テスト構造の再編成
  - テストファイルをunit/とworkflow/ディレクトリに分離
  - E2Eテスト用の設定と実行方法を簡略化
  - カバレッジレポート生成プロセスの改善

### Improved

- テストカバレッジの向上
  - 全体カバレッジがステートメント55.44%、ブランチ41.47%、関数57.79%に向上
  - error-handlers.tsのカバレッジが87.3%に到達
  - extension.tsのカバレッジが67.6%に向上

## [1.0.9] - 2025-04-05

### Added

- E2Eテスト環境の実装
  - 実際のVS Code APIを使用した統合テスト
  - ユーザー操作シーケンスの自動テスト
  - テスト用の隔離された環境構築
  - UI操作のシミュレーション機能

### Improved

- 拡張機能のテスト可能性向上
  - テスト用APIのエクスポート
  - 設定バリデーション関数の分離
  - 外部からテスト可能なインターフェース追加
- テスト戦略ドキュメントの整備
  - E2Eテストに関するベストプラクティス
  - テスト環境のセットアップ手順
  - シミュレーションパターンの例

## [1.0.8] - 2025-04-05

### Fixed

- テスト実行時の無限再帰問題を解決
  - モック環境と統合テスト環境を明確に分離
  - `test/setup.ts` による環境変数ベースのテストモード切り替え実装
  - テストヘルパーのモック関数を環境に応じて条件分岐するよう改善

### Improved

- テスト関連コードの品質向上
  - VS Code API 呼び出し時の型問題を修正（`vscode` → `vscodeTypes`）
  - 統合テストモードでのスキップロジック追加
  - エラーハンドリング強化によるテスト安定性向上
  - テスト関連ドキュメントを更新

## [1.0.7] - 2025-04-05

### Added

- GitHub Actions ワークフローの追加
  - プッシュとプルリクエスト時の自動テスト実行
  - タグ付け時の自動ビルドとデプロイ
  - Visual Studio Marketplace への自動パブリッシング

### Improved

- CI/CD パイプラインの整備
  - テスト、ビルド、デプロイの自動化
  - GitHub Actions 設定ファイルの追加
  - テストカバレッジ結果の自動収集

## [1.0.6] - 2024-07-30

### 修正

- モックリセット方法の改善により、テスト間の干渉を防止
- `preflightChecks`関数のテストを改善し、Docker 未インストール時の動作を正確に検証
- `vscode.env.openExternal`のモック方法を修正し、Docker インストールガイド表示機能のテストを安定化
- テスト終了時に元の関数を確実に復元するために`try/finally`パターンを導入

### 改善

- 明確なアサーションメッセージの追加によりテスト失敗時のデバッグを容易化
- テスト実行前にモックを確実にリセットする仕組みを強化

## [1.0.5] - 2025-04-06

### Fixed

- テストカバレッジ向上のための修正
  - エラーハンドラーモジュールのテスト環境対応を改善
  - VSCode API のモック化を強化
  - Docker 関連エラー処理のテストケース追加
  - ファイルシステム操作のテストケース追加
  - 各 OS プラットフォーム固有エラーメッセージのテスト追加

### Improved

- ブランチカバレッジが 50%以上に向上
- テスト環境でのモック対応を改善
- テスト失敗の修正

## [1.0.4] - 2025-04-05

### Added

- テストカバレッジ測定機能の追加
  - nyc (Istanbul) による単体テストのカバレッジ計測
  - TypeScript 対応のカバレッジ設定
  - テスト結果レポート生成機能

### Changed

- テスト環境の簡略化
  - DBus 関連の設定とライブラリの削除
  - Docker in Docker 関連の冗長な設定を削除
  - UI 統合テストの廃止とユニットテストへの集中
  - テスト関連ドキュメントの更新
- テスト実行方法をシンプルに変更

### Improved

- テストドキュメントの整備
  - テスト実行手順の明確化
  - テスト結果レポートの見方を説明
  - モックを使ったテスト例の追加

## [1.0.3] - 2025-04-04

### Added

- エラーハンドリングに関するテスト環境の構築
  - 基本的なエラーハンドリングのユニットテスト実装
  - Docker 関連エラーのテスト実装
  - 入力チェックエラーのテスト実装
- README にテスト実行手順を追加

### Improved

- テスト環境の整備
  - ts-mocha によるテスト環境構築
  - TypeScript/ESLint 設定の最適化

## [1.0.0] - Initial release

### Added

- R/Python 開発環境構築機能
- 既存のエラーハンドリング機能
  - Remote Containers 拡張機能チェック
  - Docker インストール状態チェック
  - Docker 実行権限チェック
  - Docker イメージ取得時のエラー処理
  - ファイルシステムアクセス権エラー処理
  - プロジェクトフォルダ選択チェック
  - キャッシュフォルダ選択チェック
  - GitHub PAT 入力チェック
  - エラーメッセージの多言語対応（OS 別）
